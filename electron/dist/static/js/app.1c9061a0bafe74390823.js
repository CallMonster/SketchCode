webpackJsonp([2,0],[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(22),o=i(r),s=n(79),d=i(s),c=n(26),u=i(c);o.default.config.debug={NODE_ENV:"production"}.DEBUG_MODE,new o.default({el:"#app",store:u.default,template:"<App/>",components:{App:d.default}})},,,,,,,,,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(11),o=i(r),s=n(34),d=i(s),c={currentProjectId:null,projects:[]},u="sketch_code",a=window.localStorage;e.default={init:function(){var t=a.getItem(u);if(t){var e=JSON.parse(t);return(0,o.default)(e)}return a.setItem(u,(0,d.default)(c)),(0,o.default)(c)},update:function(t){a.setItem(u,(0,d.default)(t))}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={SWITCH_PROJECT:"SWITCH_PROJECT",ADD_PROJECT:"ADD_PROJECT",UPDATE_PROJECT:"UPDATE_PROJECT",DESTROY_PROJECT:"DESTROY_PROJECT"}},,,,,,,,,,,,,function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={upper:function(t){return t.toString().toUpperCase()}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(10),o=i(r);e.default={switchProject:function(t,e){var n=t.commit;n(o.default.SWITCH_PROJECT,e)},addProject:function(t,e){var n=t.commit;n(o.default.ADD_PROJECT,e)},updateProject:function(t,e){var n=t.commit;n(o.default.UPDATE_PROJECT,e)},destroyProject:function(t,e){var n=t.commit;n(o.default.DESTROY_PROJECT,e)}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={currentProjectId:function(t){return t.currentProjectId},currentProject:function(t){return t.currentProjectId?t.projects.find(function(e){return e.id===t.currentProjectId}):null},projects:function(t){return t.projects},projectCount:function(t){return t.projects.length}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(22),o=i(r),s=n(2),d=i(s),c=n(24),u=i(c),a=n(25),f=i(a),l=n(27),h=i(l),p=n(9),m=i(p);o.default.use(d.default);var v=m.default.init();e.default=new d.default.Store({state:v,getters:f.default,actions:u.default,mutations:h.default})},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){t.currentProjectId=e,p.default.update(t)}function o(t){var e=Date.now(),n={id:"p_"+e,name:"Untitled",html:"",style:"",js:"",created_at:e,modified_at:e};t.projects.push(n),r(t,n.id)}function s(t,e){var n=t.projects.find(function(t){return t.id===e.id});if(n){for(var i in e)n[i]=e[i];n.modified_at=Date.now()}p.default.update(t)}function d(t,e){var n=t.projects.find(function(t){return t.id===e}),i=t.projects.indexOf(n);t.projects.splice(i,1);var o=t.projects.sort(function(t,e){return t.modified_at<e.modified_at});o.length?r(t,o[0].id):r(t,null)}Object.defineProperty(e,"__esModule",{value:!0});var c,u=n(12),a=i(u),f=n(10),l=i(f),h=n(9),p=i(h);e.default=(c={},(0,a.default)(c,l.default.SWITCH_PROJECT,function(t,e){var n=e.id;r(t,n)}),(0,a.default)(c,l.default.ADD_PROJECT,function(t){o(t)}),(0,a.default)(c,l.default.UPDATE_PROJECT,function(t,e){s(t,e)}),(0,a.default)(c,l.default.DESTROY_PROJECT,function(t,e){var n=e.id;d(t,n)}),c)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),o=i(r),s=n(81),d=i(s),c=n(82),u=i(c),a=n(83),f=i(a),l=n(2);n(71),e.default={name:"app",data:function(){return{winWdith:0,minWidth:100,width:{projectList:200,editor:400},moving:!1,count:0}},components:{EditorWrapper:d.default,Preview:u.default,ProjectList:f.default},computed:(0,o.default)({},(0,l.mapGetters)(["currentProjectId","projectCount"]),{dev:function(){return"http:"===window.location.protocol},hasProject:function(){return this.projectCount>0},tipsStyle:function(){return{left:this.width.projectList+"px"}}}),created:function(){this.winWdith=window.innerWidth,window.addEventListener("resize",this.handleResize)},mounted:function(){this.initShortcut()},methods:{handleResize:function(){this.winWdith=window.innerWidth},resize:function(t,e){var n=this;this.cleanMouseEvent();var i=t.clientX,r=this.width[e],o=this.width["editor"===e?"projectList":"editor"];this.moving=!0,window.onmousemove=function(t){var s=t.clientX-i;r+s<n.minWidth?n.width[e]=n.minWidth:n.winWdith-(r+s)-o<n.minWidth?n.width[e]=n.winWdith-n.minWidth-o:n.width[e]=r+s},window.onmouseup=this.cleanMouseEvent},cleanMouseEvent:function(){this.moving=!1,window.onmousemove=null,window.onmouseup=null},initShortcut:function(){document.addEventListener("keydown",this.shortcutKeydown,!1),document.addEventListener("keyup",this.shortcutKeyup,!1);var t=this.$refs.previewRef.$el.querySelector("iframe").contentDocument;t.addEventListener("keydown",this.shortcutKeydown,!1),t.addEventListener("keyup",this.shortcutKeyup,!1)},shortcutKeydown:function(t){91===t.keyCode?this.commandKey=!0:!this.commandKey||78!==t.keyCode&&(75===t.keyCode,1)?this.commandKey&&8===t.keyCode&&this.distroyProject():this.newProject()},shortcutKeyup:function(t){this.commandKey=!1},newProject:function(){this.$store.dispatch("addProject")},distroyProject:function(){window.confirm("Are you sure to delete this project?")&&this.$store.dispatch("destroyProject",{id:this.currentProjectId}),this.commandKey=!1}}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=i(r);n(69),n(70),n(14),n(38),n(13),n(15),n(68),n(37);var s=n(78),d=i(s),c=n(23),u=i(c);e.default={name:"Editor",props:["type","height","code","currentProjectId"],data:function(){return{input:"",codeMirror:null}},filters:u.default,watch:{currentProjectId:function(){this.initCode()}},computed:{typeName:function(){var t={html:"html",style:"css",js:"js"};return t[this.type]}},mounted:function(){this.initEditor(),this.initCode()},methods:{initEditor:function(){var t={html:"htmlmixed",style:"css",js:"javascript"};console.log(t[this.type]),this.codeMirror=(0,o.default)(this.$el.querySelector(".inputarea"),{lineNumbers:!0,mode:t[this.type],lineWrapping:!0,theme:"material",scrollbarStyle:"overlay",tabSize:2}),this.$el.querySelector(".CodeMirror-scroll").style.height=this.$el.clientHeight},initCode:function(){this.setCodeMirrorValue(this.code)},update:d.default.debounce(function(){this.$emit("updateCode",this.type,this.codeMirror.getValue().trim())},300),setCodeMirrorValue:function(t){this.codeMirror.getDoc().setValue(t)}}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(12),o=i(r),s=n(3),d=i(s),c=n(80),u=i(c),a=n(2);e.default={name:"EditorWrapper",props:{width:Number},data:function(){return{winHeight:0,minHeight:50,height:{html:0,style:0,js:0}}},components:{Editor:u.default},computed:(0,d.default)({},(0,a.mapGetters)(["currentProjectId","currentProject"]),{editorWrapperWidth:function(){return{width:this.width+"px"}}}),watch:{currentProjectId:function(){this.$emit("initCode")}},created:function(){this.winHeight=window.innerHeight;for(var t in this.height)this.height[t]=this.winHeight/3;window.addEventListener("resize",this.handleResize)},methods:{handleResize:function(){this.winHeight=window.innerHeight;var t=0;for(var e in this.height)t+=this.height[e];for(var n in this.height)this.height[n]=this.winHeight*this.height[n]/t},updateCode:function(t,e){this.$store.dispatch("updateProject",(0,o.default)({id:this.currentProject.id},t,e))},resizeEditor:function(t,e,n){var i=this;this.cleanMouseEvent();var r=t.clientY,o=this.height[e],s=this.height[n];document.onmousemove=function(t){var d=t.clientY-r;o+d<i.minHeight?(i.height[e]=i.minHeight,i.height[n]=o+s-i.minHeight):s-d<i.minHeight?(i.height[e]=o+s-i.minHeight,i.height[n]=i.minHeight):(i.height[n]=s-d,i.height[e]=o+d)},document.onmouseup=this.cleanMouseEvent},cleanMouseEvent:function(){document.onmousemove=null,document.onmouseup=null}}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),o=i(r),s=n(2);e.default={name:"Preview",computed:(0,o.default)({},(0,s.mapGetters)(["currentProject"])),watch:{currentProject:{handler:function(t,e){t&&e?t.html===e.html&&t.js===t.js&&t.style!==t.style?this.updateStyle():this.update():t&&this.update()},deep:!0}},mounted:function(){this.currentProject&&this.update()},methods:{update:function(){var t=this.$refs.previewRef.contentDocument;t.body.innerHTML=this.currentProject.html;var e=document.createElement("script");e.type="text/javascript",e.id=this.currentProject.id+"_script",e.textContent=this.currentProject.js;var n=document.createElement("style");n.type="text/css",n.id=this.currentProject.id+"_style",n.textContent=this.currentProject.style,t.body.appendChild(e),t.body.appendChild(n)},updateStyle:function(){var t=this.$refs.previewRef.contentDocument,e=t.getElementById(this.currentProject.id+"_style");e.textContent=this.currentProject.style},cleanPreview:function(){var t=this.$refs.previewRef.contentDocument;t.body.innerHTML=""}}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),o=i(r),s=n(84),d=i(s),c=n(2);e.default={name:"ProjectList",props:{width:Number},components:{ProjectName:d.default},computed:(0,o.default)({},(0,c.mapGetters)(["projects","currentProjectId"]),{sortedProjects:function(){return this.projects.slice().sort(function(t,e){return e.modified_at-t.modified_at})},projectListWidth:function(){return{width:this.width+"px"}}})}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"ProjectName",props:{active:Boolean,project:Object,projectListWidth:String},data:function(){return{name:"",editMode:!1}},methods:{switchProject:function(){this.$store.dispatch("switchProject",{id:this.project.id})},switchEditMode:function(){var t=this;this.editMode=!this.editMode,this.editMode?(this.name=this.project.name,setTimeout(function(){t.$refs.nameInputRef.select()},1)):this.name=""},blurInput:function(){this.$refs.nameInputRef.blur()},save:function(){var t=this,e=this.name.trim();e===this.project.name?this.switchEditMode():""===e?(this.name=this.project.name,this.switchEditMode()):this.$store.dispatch("updateProject",{id:this.project.id,name:e}).then(function(){t.switchEditMode()})},unsave:function(){this.name=this.project.name,this.switchEditMode()}}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},,function(t,e,n){var i,r;n(77),i=n(28);var o=n(90);r=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(r=i=i.default),"function"==typeof r&&(r=r.options),r.render=o.render,r.staticRenderFns=o.staticRenderFns,t.exports=i},function(t,e,n){var i,r;n(72),i=n(29);var o=n(85);r=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(r=i=i.default),"function"==typeof r&&(r=r.options),r.render=o.render,r.staticRenderFns=o.staticRenderFns,t.exports=i},function(t,e,n){var i,r;n(74),i=n(30);var o=n(87);r=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(r=i=i.default),"function"==typeof r&&(r=r.options),r.render=o.render,r.staticRenderFns=o.staticRenderFns,t.exports=i},function(t,e,n){var i,r;n(76),i=n(31);var o=n(89);r=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(r=i=i.default),"function"==typeof r&&(r=r.options),r.render=o.render,r.staticRenderFns=o.staticRenderFns,t.exports=i},function(t,e,n){var i,r;n(75),i=n(32);var o=n(88);r=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(r=i=i.default),"function"==typeof r&&(r=r.options),r.render=o.render,r.staticRenderFns=o.staticRenderFns,t.exports=i},function(t,e,n){var i,r;n(73),i=n(33);var o=n(86);r=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(r=i=i.default),"function"==typeof r&&(r=r.options),r.render=o.render,r.staticRenderFns=o.staticRenderFns,t.exports=i},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:"editor editor-"+t.type,style:{height:t.height+"px"}},[n("div",{staticClass:"type"},[t._v(t._s(t.typeName))]),t._v(" "),n("div",{staticClass:"inputarea",on:{keyup:t.update}}),t._v(" "),t._t("default")],2)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"item",class:{active:t.active,"edit-mode":t.editMode}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.editMode,expression:"!editMode"}],staticClass:"name",on:{click:t.switchProject,dblclick:t.switchEditMode}},[t._v(t._s(t.project.name))]),t._v(" "),n("input",{directives:[{name:"show",rawName:"v-show",value:t.editMode,expression:"editMode"},{name:"model",rawName:"v-model",value:t.name,expression:"name"}],ref:"nameInputRef",staticClass:"name-input",attrs:{type:"text"},domProps:{value:t._s(t.name)},on:{blur:t.save,keyup:[function(e){t._k(e.keyCode,"enter",13)||t.blurInput(e)},function(e){t._k(e.keyCode,"esc",27)||t.unsave(e)}],input:function(e){e.target.composing||(t.name=e.target.value)}}})])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{style:t.editorWrapperWidth,attrs:{id:"editor-wrapper"}},[t.currentProject?n("div",[n("Editor",{attrs:{type:"html",height:t.height.html,code:t.currentProject.html,currentProjectId:t.currentProjectId},on:{updateCode:t.updateCode}},[n("div",{staticClass:"row-resizer",on:{mousedown:function(e){t.resizeEditor(e,"html","style")}}})]),t._v(" "),n("Editor",{attrs:{type:"style",height:t.height.style,code:t.currentProject.style,currentProjectId:t.currentProjectId},on:{updateCode:t.updateCode}},[n("div",{staticClass:"row-resizer",on:{mousedown:function(e){t.resizeEditor(e,"style","js")}}})]),t._v(" "),n("Editor",{attrs:{type:"js",height:t.height.js,code:t.currentProject.js,currentProjectId:t.currentProjectId},on:{updateCode:t.updateCode}})],1):t._e(),t._v(" "),t._t("default")],2)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{style:t.projectListWidth,attrs:{id:"project-list"}},[n("h1",{staticClass:"logo"},[t._v("<SketchCode/>")]),t._v(" "),n("div",{staticClass:"list"},[n("div",{staticClass:"inner"},t._l(t.sortedProjects,function(e){return n("ProjectName",{attrs:{project:e,active:e.id===t.currentProjectId}})}))]),t._v(" "),t._t("default")],2)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"preview-wrapper"}},[n("iframe",{ref:"previewRef",attrs:{id:"preview"}}),t._v(" "),t._t("default")],2)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("ProjectList",{attrs:{width:t.width.projectList}},[n("div",{staticClass:"resizer",on:{mousedown:function(e){t.resize(e,"projectList")}}})]),t._v(" "),n("EditorWrapper",{ref:"EditorWrapperRef",attrs:{width:t.width.editor}},[n("div",{staticClass:"resizer",on:{mousedown:function(e){t.resize(e,"editor")}}})]),t._v(" "),n("Preview",{ref:"previewRef"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.moving,expression:"moving"}],staticClass:"mask"})]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.hasProject,expression:"!hasProject"}],style:t.tipsStyle,attrs:{id:"tips"}},[n("ul",[n("li",[t.dev?n("b",[t._v("⌘ + K")]):n("b",[t._v("⌘ + N")]),t._v(" to create a new project")]),t._v(" "),t._m(0),t._v(" "),t._m(1)])])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",[n("b",[t._v("⌘ + Del")]),t._v(" to delete current project")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",[n("b",[t._v("Double Click")]),t._v(" project title to rename")])}]}}]);